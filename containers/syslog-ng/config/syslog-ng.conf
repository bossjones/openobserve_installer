@version: 4.7
@include "scl.conf"

options {
    keep-hostname(yes);
    use-dns(no);
    create-dirs(yes);
    owner("abc");
    group("users");
    perm(0777);
    log_fifo_size(10000);
    log_msg_size(65536);
};

# stats {
#     freq(30);
#     level(3);
# };

source s_local {
    internal();
    # system();
};

source s_network {
    network(
        transport("udp")
        port(1514)
        flags(no-parse)
    );
    network(
        transport("tcp")
        port(1601)
        flags(no-parse)
    );
    network(
        transport("tcp")
        port(16514)
        flags(no-parse)
    );
};

# source s_journald {
#     systemd-journal(
#         prefix(".journald.")
#         max-field-size(65536)
#     );
# };

source s_files {
    file("/data/unifi-core/logs/apiKey.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/app.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/apps.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/auth.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/backup.export.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/backup.import.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/backup.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/backup.recovery.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/backup.schedule.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/chiper.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.access.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.api.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.applicationEvents.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.backup.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.devices.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.dm.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.invites.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.notifications.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.teleport.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud.uid.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/cloud1.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/consoleGroup.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/controllers.clientList.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/controllers.deviceList.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/controllers.deviceTopology.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/controllers.discovery.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/controllers.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/controllers.refreshSsoRoles.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/database.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/discovery.client.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/discovery.client1.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/discovery.client2.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/discovery.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/discovery.responder.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/errors.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/errors1.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/fingerprint.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/firmware.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/floorplans.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/grpc.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/hardware.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/health.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/health1.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/health2.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/http.apiProxy.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/http.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/http.uiProxy.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/http.wsProxy.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/http1.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/http2.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/internetIssues.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/ipc.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/ipc.messageBox.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/ipc.ucp4.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/linkShare.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/messageBox.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/nginx-access.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/nginx-error.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/notifications.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/notifications.storage.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/redux.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/redux.wsUpdates.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/sdnotify.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/service.crash.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/service.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/service1.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/service2.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/sharedTokens.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/sso.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/stackable.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/system.directRemoteConnection.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/system.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/system.networking.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/system.state.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/system.storage.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/system.support.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/system.ustorage.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/systemd.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/taskQueue.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/taskTracker.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/tools.apt.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/tools.systool.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/trace.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/uisp.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/ulp.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/unvrFlashStorageMigration.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/uum.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/webrtc_addon.log" follow-freq(1) flags(no-parse));
    file("/data/unifi-core/logs/webrtc.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/access.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/gc.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/hotspot.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/hs_err_pidunifi.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/inform_request.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/migration.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/mongod.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/server.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/startup.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/state.log" follow-freq(1) flags(no-parse));
    file("/srv/unifi/logs/tasks.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/access.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/gc.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/hotspot.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/hs_err_pidunifi.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/inform_request.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/migration.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/mongod.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/server.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/startup.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/state.log" follow-freq(1) flags(no-parse));
    file("/usr/lib/unifi/logs/tasks.log" follow-freq(1) flags(no-parse));
    file("/var/log/apt/history.log" follow-freq(1) flags(no-parse));
    file("/var/log/apt/term.log" follow-freq(1) flags(no-parse));
    file("/var/log/auth.log" follow-freq(1) flags(no-parse));
    file("/var/log/dnsmasq.log" follow-freq(1) flags(no-parse));
    file("/var/log/freeradius/radius.log" follow-freq(1) flags(no-parse));
    file("/var/log/lighttpd/error.log" follow-freq(1) flags(no-parse));
    file("/var/log/messages" follow-freq(1) flags(no-parse));
    file("/var/log/nginx/access.log" follow-freq(1) flags(no-parse));
    file("/var/log/nginx/error.log" follow-freq(1) flags(no-parse));
    file("/var/log/postgresql/postgresql-14-main-upgrade.log" follow-freq(1) flags(no-parse));
    file("/var/log/postgresql/postgresql-14-main.log" follow-freq(1) flags(no-parse));
    file("/var/log/ubnt-daemon.log" follow-freq(1) flags(no-parse));
    file("/var/log/unattended-upgrades/unattended-upgrades-dpkg.log" follow-freq(1) flags(no-parse));
    file("/var/log/unattended-upgrades/unattended-upgrades-shutdown.log" follow-freq(1) flags(no-parse));
    file("/var/log/unattended-upgrades/unattended-upgrades.log" follow-freq(1) flags(no-parse));
};

source s_metrics {
    file("/config/syslog-ng.sock" flags(no-parse));
};

destination d_metrics {
    file(
        "/config/syslog-ng.sock"
        owner("abc")
        group("users")
        perm(0777)
    );
};


destination d_openobserve {
    syslog("openobserve" transport("tcp") port(5514));
};

log {
    source(s_local);
    source(s_network);
    # source(s_journald);
    source(s_files);
    source(s_metrics);
    destination(d_openobserve);
    destination(d_metrics);
};
